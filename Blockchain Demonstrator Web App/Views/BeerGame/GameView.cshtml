@using Microsoft.CodeAnalysis
@model BlockchainDemonstratorApi.Models.Classes.Game


<head>
    <title>Game Page</title>
</head>

<body>
<section class="actor-display">
    @if (Model != null)
    {
        @foreach (var player in Model.Players)
        {
            <section id="section-@player.Role.Id">
                <h4>Name: @player.Name</h4>
                <h4>Role: @player.Role.Id</h4>
                <h4>Inventory: @player.Inventory</h4>
                <h4>Backorder: @player.Backorder</h4>

                <form>
                    <h6>Order volume: </h6>
                    <input type="number" name="order">
                </form>

                <section>
                    <h4>Order history:</h4>
                    <table class="order-history">
                        <thead>
                        <tr>
                            <th>Day</th>
                            <th>Order</th>
                        </tr>
                        </thead>

                        @for (int i = 0 + 1; i < 15 + 1; i++)
                        {
                            <tr>
                                <td class="order-history">@i</td>
                                <td class="order-history">
                                @if (i < player.IncomingDelivery.Count())
                                { 
                                    @if (player.IncomingDelivery[i] != null) { @Html.Raw(player.IncomingDelivery[i].Volume); } //TODO: Make new order number to get history, incomingDelivery volume != order volume
                                }
                                </td>
                            </tr>
                        }
                    </table>
                </section>
                <section>
                    <h4>Incoming deliveries</h4>
                    <table class="order-history">
                        <thead>
                            <tr>
                                <th>Order Date</th>
                                <th>Arrival Date</th>
                                <th>Volume</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var order in player.IncomingDelivery)
                            {
                                <tr>
                                    <td>@order.OrderDay</td>
                                    <td>@order.ArrivalDay</td>
                                    <td>@order.Volume</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </section>

            </section>
        }

    }
</section>
<button onclick="BeerGame.sendOrders('@Model.Id')">Send orders</button>
</body>

@section Scripts
{
    <script src="~/js/BeerGame.js"></script>
    <script>
    BeerGame.init(@Model.Id)
    </script>
}